<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UE27 - Master Stats & √âpido</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .correct { background-color: #10b981 !important; color: white; }
        .wrong { background-color: #ef4444 !important; color: white; }
        .hidden { display: none; }
        .tab-active { border-bottom: 4px solid white; font-weight: bold; }
        .cours-card { border-left: 4px solid #4f46e5; background: white; padding: 1rem; border-radius: 0.75rem; margin-bottom: 1rem; shadow: 0 1px 3px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="bg-gray-100 min-h-screen pb-10">

    <nav class="bg-indigo-700 text-white p-4 shadow-md sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <span class="font-bold">üìä UE27 : R√âVISIONS</span>
            <div class="flex space-x-4 text-sm">
                <button id="nav-home" onclick="showSection('home')" class="tab-active py-1">Quiz</button>
                <button id="nav-cours" onclick="showSection('cours')" class="py-1">Cours</button>
                <button id="nav-stats" onclick="showSection('stats')" class="py-1">Scores</button>
            </div>
        </div>
    </nav>

    <section id="cours" class="container mx-auto p-4 hidden">
        <h2 class="text-2xl font-bold mb-6 text-indigo-800">Synth√®se des Cours (Pr. Balay√©)</h2>
        
        <div class="space-y-6">
            <div class="cours-card">
                <h3 class="text-lg font-bold text-indigo-700 underline mb-2">1. Bases de la Statistique</h3>
                <p class="text-sm text-gray-700"><strong>D√©finition :</strong> La Statistique (science) vs les Statistiques (chiffres). 
                L'√©tape <strong>Inf√©rentielle</strong> est la plus cruciale : elle permet d'extrapoler de l'√©chantillon √† la population g√©n√©rale.</p>
                <ul class="list-disc ml-5 mt-2 text-xs space-y-1 text-gray-600">
                    <li><strong>Variables :</strong> Quantitative (Continue = mesure / Discr√®te = compte) ou Qualitative (Nominale = sans ordre / Ordinale = avec ordre).</li>
                    <li><strong>Indicateurs :</strong> Moyenne (sensible aux valeurs extr√™mes), M√©diane (50% de part et d'autre), √âcart-type (dispersion).</li>
                    <li><strong>Test Statistique :</strong> H0 (pas de diff√©rence). Si p < 0.05, on rejette H0 (r√©sultat significatif).</li>
                </ul>
            </div>

            <div class="cours-card">
                <h3 class="text-lg font-bold text-indigo-700 underline mb-2">2. √âvaluation Diagnostique</h3>
                <p class="text-sm text-gray-700">On compare un test √† une r√©f√©rence de certitude : le <strong>Gold Standard</strong>.</p>
                <div class="grid grid-cols-2 gap-4 mt-2 text-xs">
                    <div class="bg-indigo-50 p-2 rounded">
                        <p class="font-bold">Qualit√©s Intrins√®ques :</p>
                        <li><strong>Sensibilit√© (Se) :</strong> Capacit√© √† d√©tecter les malades (VP / Malades).</li>
                        <li><strong>Sp√©cificit√© (Sp) :</strong> Capacit√© √† exclure les sains (VN / Non-malades).</li>
                    </div>
                    <div class="bg-green-50 p-2 rounded">
                        <p class="font-bold">Qualit√©s Extrins√®ques :</p>
                        <li><strong>VPP :</strong> Probabilit√© d'√™tre malade si T+. D√©pend de la pr√©valence.</li>
                        <li><strong>VPN :</strong> Probabilit√© d'√™tre sain si T-.</li>
                    </div>
                </div>
                <p class="text-xs mt-2 text-gray-600"><strong>Concordance (Kappa) :</strong> Mesure l'accord entre deux observateurs en retirant l'accord d√ª au hasard. <br><em>Kappa > 0.8 = Excellent / < 0.4 = Faible.</em></p>
            </div>

            <div class="cours-card">
                <h3 class="text-lg font-bold text-indigo-700 underline mb-2">3. Introduction √† l'√âpid√©miologie</h3>
                <p class="text-sm text-gray-700"><strong>Pr√©valence :</strong> Nombre de cas √† un instant T (Stock). <strong>Incidence :</strong> Nouveaux cas sur une p√©riode (Flux).</p>
                <ul class="list-disc ml-5 mt-2 text-xs space-y-1 text-gray-600">
                    <li><strong>√âtude de Cohorte :</strong> On suit des expos√©s/non-expos√©s. On calcule le <strong>Risque Relatif (RR)</strong>.</li>
                    <li><strong>√âtude Cas-T√©moins :</strong> R√©trospective. On compare malades et sains. On calcule l'<strong>Odds Ratio (OR)</strong>.</li>
                    <li><strong>Significativit√© :</strong> Si l'Intervalle de Confiance (IC 95%) contient la valeur <strong>1</strong>, le r√©sultat n'est pas significatif.</li>
                </ul>
            </div>
        </div>
    </section>

    <section id="home" class="container mx-auto p-4">
        <h2 class="text-xl font-bold mb-4 text-gray-700">Choisissez un module :</h2>
        <div id="module-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
    </section>

    <section id="stats" class="container mx-auto p-4 hidden">
        <div class="bg-white p-6 rounded-xl shadow-lg text-center max-w-md mx-auto">
            <h2 class="text-2xl font-bold mb-4">Ma Progression</h2>
            <div id="global-avg" class="text-6xl font-black text-indigo-600 mb-6">0%</div>
            <div id="detail-stats" class="text-left space-y-2 mb-6"></div>
            <button onclick="resetAll()" class="text-red-500 text-sm font-bold border border-red-200 px-4 py-2 rounded-lg hover:bg-red-50">R√©initialiser les scores</button>
        </div>
    </section>

    <section id="quiz" class="container mx-auto p-4 hidden">
        <div class="bg-white p-6 rounded-2xl shadow-xl max-w-2xl mx-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 id="q-title" class="text-indigo-600 font-bold uppercase text-xs tracking-tighter"></h3>
                <span id="q-progress" class="text-xs text-gray-400"></span>
            </div>
            <p id="q-text" class="text-xl font-semibold text-gray-800 mb-8"></p>
            <div id="options" class="space-y-3"></div>
            <div id="feedback" class="mt-6 p-4 rounded-xl bg-slate-50 border border-slate-200 hidden">
                <p id="feedback-txt" class="text-sm"></p>
            </div>
            <button id="next-btn" class="w-full mt-8 bg-indigo-600 text-white py-4 rounded-xl font-bold hidden shadow-lg shadow-indigo-200">Continuer</button>
        </div>
    </section>

    <script>
        const quizData = {
            m1: { t: "Statistiques (Bases)", qs: [
                { q: "Quelle est la d√©finition de la statistique ?", o: ["Science du recueil et de l'analyse", "Ensemble de chiffres d'une √©tude"], a: 0, e: "La statistique est la science globale." },
                { q: "La m√©diane est l'indicateur qui :", o: ["Partage la s√©rie en deux", "Est le plus fr√©quent"], a: 0, e: "50% sont au-dessus, 50% en-dessous." },
                { q: "Une variable binaire (Sexe) est :", o: ["Qualitative nominale", "Quantitative"], a: 0, e: "C'est une cat√©gorie sans ordre." },
                { q: "Si p = 0.03 au seuil 5% :", o: ["Rejet de H0", "Maintien de H0"], a: 0, e: "p < 0.05 est significatif." },
                { q: "L'√©cart-type exprime :", o: ["La dispersion", "La tendance centrale"], a: 0, e: "Il mesure l'√©talement des donn√©es." }
            ]},
            m2: { t: "Tests Diagnostiques", qs: [
                { q: "Probabilit√© d'√™tre T+ chez les malades :", o: ["Sensibilit√©", "Sp√©cificit√©"], a: 0, e: "Se = VP / Malades." },
                { q: "Le Gold Standard est :", o: ["Le test de r√©f√©rence", "Le test le moins cher"], a: 0, e: "C'est la v√©rit√© diagnostique." },
                { q: "Si la pr√©valence diminue, la VPP :", o: ["Diminue", "Augmente"], a: 0, e: "Plus une maladie est rare, plus le risque de faux positifs augmente." },
                { q: "Le Kappa de Cohen mesure :", o: ["La concordance", "L'incidence"], a: 0, e: "Accord retirant la part du hasard." },
                { q: "Kappa = 0.90 est un accord :", o: ["Excellent", "M√©diocre"], a: 0, e: "> 0.80 est consid√©r√© comme excellent." }
            ]},
            m3: { t: "√âpid√©miologie", qs: [
                { q: "L'incidence est une mesure de :", o: ["Flux (nouveaux cas)", "Stock (cas totaux)"], a: 0, e: "Vitesse d'apparition des cas." },
                { q: "L'√©tude Cas-T√©moins est :", o: ["R√©trospective", "Prospective"], a: 0, e: "On part des malades vers le pass√©." },
                { q: "On calcule le Risque Relatif (RR) en :", o: ["√âtude de cohorte", "√âtude cas-t√©moins"], a: 0, e: "N√©cessite de suivre les gens." },
                { q: "Un OR < 1 indique un facteur :", o: ["Protecteur", "De risque"], a: 0, e: "R√©duit la probabilit√© de maladie." },
                { q: "John Snow a travaill√© sur :", o: ["Le Chol√©ra", "La variole"], a: 0, e: "Acte fondateur √† Londres (1854)." }
            ]},
            m4: { t: "Formatage (Expert)", qs: [
                { q: "Structure id√©ale d'un tableau :", o: ["1 ligne = 1 individu", "1 ligne = 1 variable"], a: 0, e: "Standard informatique de base." },
                { q: "Cellules fusionn√©es en Stats :", o: ["Strictement interdit", "Autoris√© pour le style"], a: 0, e: "Cela emp√™che la lecture par les logiciels." },
                { q: "Format √† privil√©gier :", o: ["CSV ou XLSX", "PDF"], a: 0, e: "Le PDF est inexploitable." },
                { q: "Variable qualitative ordinale :", o: ["Stade d'un cancer", "Couleur des yeux"], a: 0, e: "Il y a un ordre logique (I < II < III)." },
                { q: "Le Codebook sert √† :", o: ["Expliquer les variables", "Faire les calculs"], a: 0, e: "C'est le dictionnaire du tableau." }
            ]}
        };

        let currentM = ''; let currentQ = 0; let score = 0;
        let userScores = JSON.parse(localStorage.getItem('ue27_final_v1')) || {};

        function showSection(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('tab-active'));
            document.getElementById('nav-' + id.split('-')[0]).classList.add('tab-active');

            if(id === 'home') renderHome();
            if(id === 'stats') renderStats();
        }

        function renderHome() {
            const grid = document.getElementById('module-grid');
            grid.innerHTML = '';
            Object.keys(quizData).forEach(k => {
                const s = userScores[k] || 0;
                grid.innerHTML += `
                    <div onclick="startQuiz('${k}')" class="bg-white p-5 rounded-2xl shadow-sm border-b-4 ${s > 70 ? 'border-green-400' : 'border-indigo-500'} cursor-pointer hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-900">${quizData[k].t}</h4>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-xs text-gray-400">5 Questions</span>
                            <span class="text-sm font-bold ${s > 70 ? 'text-green-600' : 'text-indigo-600'}">${s}%</span>
                        </div>
                    </div>`;
            });
        }

        function startQuiz(k) {
            currentM = k; currentQ = 0; score = 0;
            showSection('quiz');
            loadQuestion();
        }

        function loadQuestion() {
            const q = quizData[currentM].qs[currentQ];
            document.getElementById('q-title').innerText = quizData[currentM].t;
            document.getElementById('q-progress').innerText = `${currentQ + 1} / 5`;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            
            const box = document.getElementById('options');
            box.innerHTML = '';
            q.o.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = "w-full text-left p-4 rounded-xl border-2 border-gray-100 hover:bg-indigo-50 font-medium transition";
                b.innerText = opt;
                b.onclick = () => checkAns(i, b);
                box.appendChild(b);
            });
        }

        function checkAns(i, b) {
            const q = quizData[currentM].qs[currentQ];
            const btns = document.getElementById('options').children;
            if(i === q.a) { score++; b.classList.add('correct'); }
            else { b.classList.add('wrong'); btns[q.a].classList.add('correct'); }
            
            document.getElementById('feedback-txt').innerText = q.e;
            document.getElementById('feedback').classList.remove('hidden');
            document.getElementById('next-btn').classList.remove('hidden');
            for(let btn of btns) btn.disabled = true;
        }

        document.getElementById('next-btn').onclick = () => {
            currentQ++;
            if(currentQ < 5) loadQuestion();
            else {
                const p = Math.round((score / 5) * 100);
                if(p > (userScores[currentM] || 0)) {
                    userScores[currentM] = p;
                    localStorage.setItem('ue27_final_v1', JSON.stringify(userScores));
                }
                showSection('home');
            }
        };

        function renderStats() {
            const keys = Object.keys(quizData);
            const avg = Math.round(keys.reduce((a,k) => a + (userScores[k]||0), 0) / keys.length);
            document.getElementById('global-avg').innerText = avg + "%";
            const det = document.getElementById('detail-stats');
            det.innerHTML = '';
            keys.forEach(k => {
                det.innerHTML += `<div class="flex justify-between text-sm border-b pb-1"><span>${quizData[k].t}</span><span class="font-bold text-indigo-600">${userScores[k]||0}%</span></div>`;
            });
        }

        function resetAll() {
            if(confirm("Tout effacer ?")) { localStorage.clear(); userScores = {}; showSection('home'); }
        }

        showSection('home');
    </script>
</body>
</html>
